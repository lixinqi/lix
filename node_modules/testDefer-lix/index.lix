#!/usr/local/bin/node

f := [cb]->{
	defer call []->{
		'good' print
	}
	cb call
}

t := []->{
	defer call []->{
		'ok' print
	}
	cc call [brk]->{
		defer call []->{
			'nice0' print
		}
		defer call []->{
			'nice1' print
		}

#	brk call
		f call []->{
			brk call
		}
	}
	'out of cc' print
}

t call

# execAsCbSubsequently := []->{
# 	cc call [brk]->{
# 		brk call
# 	}
# }
# 
# bar := []->{
# 	defer call []->{ 'good' print }
# 	defer call []->{
# 		execAsCbSubsequently call
# 		'nice' print
# 	}
# 	execAsCbSubsequently call
# }
#  
# bar call
'end' print
